!function(e){"use strict";const t=e.CurrencyConverter,r=Symbol("privateMethod");class n{constructor(){this.API_ENDPOINT="https://free.currencyconverterapi.com/api/v5"}init(){}[r](){console.log("private")}getCurrencies(){return new Promise((e,t)=>{fetch(`${this.API_ENDPOINT}/currencies`).then(t=>{t.json().then(t=>{e(t)})}).catch(e=>{t(`Failed to load currencies from remote API [${e}]`)})})}convert(e=0,t="",r=""){return e&&t&&r?new Promise((e,n)=>{fetch(`${this.API_ENDPOINT}/convert?q=${t}_${r}&compact=y`).then(t=>{t.json().then(t=>{e(t)})})}):Promise.reject("Specify amount and currencies")}static noConflict(){return e.CurrencyConverter=t,this}}"function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:e.CurrencyConverter=n}("undefined"!=typeof window?window:this||{});
class App{constructor(t=null){this.c1Field=this.id("c1Field"),this.c2Field=this.id("c2Field"),this.amountField=this.id("amount"),this.convertBtn=this.id("convertBtn"),this.tab1Btn=this.id("tab1Btn"),this.tab2Btn=this.id("tab2Btn"),this.tab1=this.id("tab1"),this.tab2=this.id("tab2"),this.converter=t,this.enableTabs=!0,this.notification=this.id("notification"),this.results=this.id("results")}id(t=""){return"string"==typeof t&&t.length?document.getElementById(t):null}init(){return this.initUI(),this.loadCurrency(),this}initUI(){this.tab2.style.display="none",this.results.style.display="none",this.tab1Btn.addEventListener("click",()=>{this.enableTabs&&(this.tab1.style.display="block",this.tab2.style.display="none",this.tab1Btn.parentNode.classList.toggle("is-active"),this.tab2Btn.parentNode.classList.toggle("is-active"))}),this.tab2Btn.addEventListener("click",()=>{this.enableTabs&&(this.tab1.style.display="none",this.tab2.style.display="block",this.tab1Btn.parentNode.classList.toggle("is-active"),this.tab2Btn.parentNode.classList.toggle("is-active"))}),this.convertBtn.addEventListener("click",()=>{""!=!this.convertBtn.getAttribute("disabled")&&this.convertCurrency()}),document.documentElement.addEventListener("click",t=>{t.target==document.querySelector("button.delete")&&(t.target.parentNode.style.display="none")}),this.registerServiceWorker()}loadCurrency(){this.enableTabs=!1,this.convertBtn.setAttribute("disabled","disabled");(async()=>{try{const t=await this.converter.getCurrencies();for(const[e,i]of Object.entries(t.results))this.c1Field.options.add(new Option(i.currencyName,e)),this.c2Field.options.add(new Option(i.currencyName,e));this.convertBtn.removeAttribute("disabled")}catch(t){this.toggleNotification(!0,t,"is-danger")}this.enableTabs=!0})()}async convertCurrency(){if(this.toggleNotification(0),!this.formIsValid())return void this.toggleNotification(1,"Enter Amount and specify the currency","is-warning");const t=parseInt(this.amountField.value),e=this.c1Field.options[this.c1Field.selectedIndex].value,i=this.c2Field.options[this.c2Field.selectedIndex].value;try{this.enableTabs=!1,this.convertBtn.setAttribute("disabled","disabled"),this.convertBtn.classList.toggle("is-loading"),this.results.style.display="none";const n=await this.converter.convert(parseInt(t),e,i),s=Object.keys(n).join();console.log(s,n[s].val);let r=Number(n[s].val*t).toLocaleString();this.results.firstElementChild.innerHTML=`${t} ${e} equals`,this.results.lastElementChild.innerHTML=`${r} ${i}`,this.results.style.display="block"}catch(t){let n=`Error converting from ${e} to ${i} [${t}]`;this.toggleNotification(1,n,"is-danger")}this.enableTabs=!0,this.convertBtn.removeAttribute("disabled"),this.convertBtn.classList.toggle("is-loading")}formIsValid(){return!(""===this.c1Field.options[this.c1Field.selectedIndex].value||""===this.c2Field.options[this.c2Field.selectedIndex].value||""===this.amountField.value)}toggleNotification(t=!1,e="",i="is-danger",n=null){if(!t)return void(this.notification.style.display="none");let s=this.notification.className;s=s.split(" ").find(t=>t.startsWith("is")),this.notification.classList.remove(s),this.notification.querySelector(":scope div").innerHTML=e,this.notification.classList.toggle(i),this.notification.style.display="block"}registerServiceWorker(){if(navigator.serviceWorker){navigator.serviceWorker.register("/sw.js").then(function(t){navigator.serviceWorker.controller})}}}const ready=t=>{"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)};ready(()=>{document.documentElement.classList.toggle("no-js"),document.documentElement.classList.add("js");window.onresize=(()=>{let t=document.querySelector(".navbar-menu");"none"==getComputedStyle(t).display?t.setAttribute("data-hidden","true"):t.setAttribute("data-hidden","false")}),document.querySelector(".navbar-burger").addEventListener("click",t=>{let e=document.querySelector(".navbar-menu");"true"==e.getAttribute("data-hidden")?(e.style.display="block",e.setAttribute("data-hidden","false")):(e.style.display="none",e.setAttribute("data-hidden","true"))});let t=document.querySelector(".preloader-wrapper");t.addEventListener((()=>{var t,e=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]})(),()=>{t.parentNode.removeChild(t)}),window.onload=(t=>{let e=document.querySelector(".navbar-menu");"none"==getComputedStyle(e).display?e.setAttribute("data-hidden","true"):e.setAttribute("data-hidden","false"),document.querySelector(".preloader-wrapper").classList.add("hide")}),document.querySelectorAll(".converter-wrapper").length&&(window.thisApp=new App(new CurrencyConverter).init())});
//# sourceMappingURL=build.js.map
