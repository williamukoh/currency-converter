{"version":3,"sources":["CurrencyConverter.js","app.js"],"names":["exports","originalGlobalValue","CurrencyConverter","privateMethod","Symbol","[object Object]","this","API_ENDPOINT","console","log","Promise","resolves","rejects","fetch","then","$result","json","$data","catch","$error","$amount","$fromCurrency","$toCurrency","$resolves","$rejects","reject","define","amd","module","window","App","$converter","c1Field","id","c2Field","amountField","convertBtn","tab1Btn","tab2Btn","tab1","tab2","converter","enableTabs","notification","results","$idname","length","document","getElementById","initUI","loadCurrency","style","display","addEventListener","parentNode","classList","toggle","getAttribute","convertCurrency","documentElement","$evt","target","querySelector","registerServiceWorker","setAttribute","async","_data","getCurrencies","key","value","Object","entries","options","add","Option","currencyName","removeAttribute","toggleNotification","getData","formIsValid","_amount","parseInt","_from","selectedIndex","_to","_result","convert","_currencyPair","keys","join","val","_totalAmount","Number","toLocaleString","firstElementChild","innerHTML","lastElementChild","_errormsg","$visible","$message","$alert","$handler","classNames","className","split","find","$className","startsWith","remove","navigator","serviceWorker","register","reg","controller","ready","fn","readyState","onresize","_nav","getComputedStyle","_preloader","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","undefined","whichTransitionEvent","removeChild","onload","querySelectorAll","thisApp","init"],"mappings":"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","file":"build.js","sourcesContent":[";(function (exports) {\n  'use strict';\n\n  // Shortcuts to improve speed and size\n  const originalGlobalValue = exports.CurrencyConverter;\n\n  // Private methods\n  const privateMethod = Symbol('privateMethod');\n\n  class CurrencyConverter {\n\n    constructor() {\n      this.API_ENDPOINT = \"https://free.currencyconverterapi.com/api/v5\";\n    }\n  \n    init() {\n      \n    }\n\n    [privateMethod] () {\n      console.log( \"private\" );\n    }\n\n    getCurrencies() {\n\n      return new Promise( (resolves, rejects) => {\n        \n        fetch( `${this.API_ENDPOINT}/currencies` ).then( ($result) => {\n          $result.json().then( ($data) => {\n            resolves($data);\n          })\n        }).catch( ($error) => {\n          rejects( `Failed to load currencies from remote API [${$error}]` );\n        })\n        \n      });\n    }\n\n    convert( $amount=0, $fromCurrency=\"\", $toCurrency=\"\" ) {\n\n      if( !$amount || !$fromCurrency || !$toCurrency ) \n        return Promise.reject( \"Specify amount and currencies\" );\n\n      return new Promise( ( $resolves, $rejects ) => {\n\n        fetch( `${this.API_ENDPOINT}/convert?q=${$fromCurrency}_${$toCurrency}&compact=y` ).then( ($result) => {\n          $result.json().then( ($data) => {\n            $resolves($data);\n          });\n        })\n\n      })\n    }\n\n    static noConflict() {\n      exports.CurrencyConverter = originalGlobalValue;\n      return this;\n    }\n  \n    \n  }\n\n  // const proto = CurrencyConverter.prototype;\n\n\n  // Expose the class either via AMD, CommonJS or the global object\n  if (typeof define === 'function' && define.amd) {\n      define(function () {\n          return CurrencyConverter;\n      });\n  }\n  else if (typeof module === 'object' && module.exports){\n      module.exports = CurrencyConverter;\n  }\n  else {\n      exports.CurrencyConverter = CurrencyConverter;\n  }\n\n})( typeof window !== \"undefined\" ? window : this || {} );\n\n\n","/* requires: CurrencyConverter.js */\n\n// private methods\nclass App {\n\n    constructor($converter = null) {\n\n        this.c1Field = this.id(\"c1Field\");\n        this.c2Field = this.id(\"c2Field\");\n        this.amountField = this.id(\"amount\");\n        this.convertBtn = this.id(\"convertBtn\");\n\n        this.tab1Btn = this.id(\"tab1Btn\");\n        this.tab2Btn = this.id(\"tab2Btn\");\n\n        this.tab1 = this.id(\"tab1\");\n        this.tab2 = this.id(\"tab2\");\n\n        this.converter = $converter;\n\n        this.enableTabs = true;\n        this.notification = this.id(\"notification\");\n\n        this.results = this.id(\"results\");\n\n    }\n\n    id( $idname = \"\" ) {\n        return (typeof $idname !== \"string\" || !$idname.length) ? null : document.getElementById($idname);\n    }\n\n    init() {\n\n        this.initUI();\n        this.loadCurrency();\n\n        return this;\n    }\n\n    initUI() {\n\n        // Tabs\n        this.tab2.style.display = \"none\";\n        this.results.style.display = \"none\";\n\n        this.tab1Btn.addEventListener(\"click\", () => {\n            if (!this.enableTabs)\n                return;\n            this.tab1.style.display = \"block\";\n            this.tab2.style.display = \"none\";\n\n            this.tab1Btn.parentNode.classList.toggle(\"is-active\");\n            this.tab2Btn.parentNode.classList.toggle(\"is-active\");\n        });\n\n        this.tab2Btn.addEventListener(\"click\", () => {\n            if (!this.enableTabs)\n                return;\n            this.tab1.style.display = \"none\";\n            this.tab2.style.display = \"block\";\n\n            this.tab1Btn.parentNode.classList.toggle(\"is-active\");\n            this.tab2Btn.parentNode.classList.toggle(\"is-active\");\n        });\n\n        // buttons\n        this.convertBtn.addEventListener(\"click\", () => {\n            if (!this.convertBtn.getAttribute(\"disabled\") != \"\")\n                this.convertCurrency();\n        });\n\n        document.documentElement.addEventListener(\"click\", ($evt) => {\n            if ($evt.target == document.querySelector(\"button.delete\")) {\n                $evt.target.parentNode.style.display = \"none\";\n            }\n        });\n\n        this.registerServiceWorker();\n\n    }\n\n    loadCurrency() {\n\n        this.enableTabs = false;\n        // this.convertBtn.classList.toggle(\"is-loading\");\n        this.convertBtn.setAttribute(\"disabled\", \"disabled\");\n\n        const getData = async() => {\n\n            try {\n                const _data = await this.converter.getCurrencies();\n\n                for (const [key, value] of Object.entries(_data.results)) {\n                    this.c1Field.options.add(new Option(value.currencyName, key));\n                    this.c2Field.options.add(new Option(value.currencyName, key));\n                }\n\n                this.convertBtn.removeAttribute(\"disabled\");\n\n            } catch ($error) {\n                this.toggleNotification(true, $error, \"is-danger\");\n            }\n\n            this.enableTabs = true;\n\n        }\n\n        getData();\n\n    }\n\n    async convertCurrency() {\n\n        this.toggleNotification(0);\n\n        if ( !this.formIsValid() ) {\n            this.toggleNotification(1, \"Enter Amount and specify the currency\", \"is-warning\");\n            return;\n        }\n\n        const _amount = parseInt(this.amountField.value);\n        const _from = this.c1Field.options[this.c1Field.selectedIndex].value;\n        const _to = this.c2Field.options[this.c2Field.selectedIndex].value;\n\n        try {\n\n          this.enableTabs = false;\n          this.convertBtn.setAttribute(\"disabled\",\"disabled\");\n          this.convertBtn.classList.toggle(\"is-loading\");\n          this.results.style.display = \"none\";\n\n          const _result = await this.converter.convert( parseInt(_amount), _from, _to );\n          const _currencyPair = Object.keys(_result).join();\n          console.log( _currencyPair, _result[_currencyPair].val );\n\n          let _totalAmount = Number(_result[_currencyPair].val * _amount).toLocaleString();\n          this.results.firstElementChild.innerHTML = `${_amount} ${_from} equals`;\n          this.results.lastElementChild.innerHTML = `${_totalAmount} ${_to}`;\n\n          this.results.style.display = \"block\";\n\n        } catch( $error ) {\n          let _errormsg = `Error converting from ${_from} to ${_to} [${$error}]`;\n          this.toggleNotification( 1, _errormsg, \"is-danger\" );\n        }\n\n        this.enableTabs = true;\n        this.convertBtn.removeAttribute(\"disabled\");\n        this.convertBtn.classList.toggle(\"is-loading\");\n    }\n\n    formIsValid() {\n        return !(this.c1Field.options[this.c1Field.selectedIndex].value === \"\" || this.c2Field.options[this.c2Field.selectedIndex].value === \"\" || this.amountField.value === \"\" );\n    }\n\n    toggleNotification($visible = false, $message = \"\", $alert = \"is-danger\", $handler = null) {\n\n        if (!$visible) {\n            this.notification.style.display = \"none\";\n            return;\n        }\n\n        // remove \"is-*\"\n        let classNames = this.notification.className;\n        classNames = classNames.split(\" \").find($className => $className.startsWith(\"is\"));\n        this.notification.classList.remove(classNames);\n\n        // set message and display\n        this.notification.querySelector(\":scope div\").innerHTML = $message;\n        this.notification.classList.toggle($alert);\n        this.notification.style.display = \"block\";\n\n    }\n\n    registerServiceWorker() {\n\n        if ( !navigator.serviceWorker )\n            return;\n\n            var _this = this;\n\n            navigator.serviceWorker.register('/sw.js').then(function(reg) {\n                \n                if (!navigator.serviceWorker.controller)\n                    return;\n                \n\n                // if (reg.waiting) {\n                //     indexController._updateReady(reg.waiting);\n                //     return;\n                // }\n\n                // if (reg.installing) {\n                //     indexController._trackInstalling(reg.installing);\n                //     return;\n                // }\n\n                // reg.addEventListener('updatefound', function() {\n                //     indexController._trackInstalling(reg.installing);\n                // });\n            });\n\n            // TODO: listen for the controlling service worker changing\n            // and reload the page\n    }\n\n}\n\n// DOM Loaded\nconst ready = (fn) => {\n    if (document.readyState != 'loading') {\n        fn();\n    } else {\n        document.addEventListener('DOMContentLoaded', fn);\n    }\n}\n\n\nready( () => { \n\n  document.documentElement.classList.toggle(\"no-js\");\n  document.documentElement.classList.add(\"js\");\n\n  const whichTransitionEvent = () => {\n      var t,\n          el = document.createElement(\"fakeelement\");\n\n      var transitions = {\n          \"transition\": \"transitionend\",\n          \"OTransition\": \"oTransitionEnd\",\n          \"MozTransition\": \"transitionend\",\n          \"WebkitTransition\": \"webkitTransitionEnd\"\n      }\n\n      for (t in transitions) {\n          if (el.style[t] !== undefined) {\n              return transitions[t];\n          }\n      }\n  }\n\n  window.onresize = () => {\n\n      let _nav = document.querySelector(\".navbar-menu\");\n\n      if (getComputedStyle(_nav).display == \"none\")\n          _nav.setAttribute(\"data-hidden\", \"true\");\n      else\n          _nav.setAttribute(\"data-hidden\", \"false\");\n\n  };\n\n  document.querySelector(\".navbar-burger\").addEventListener(\"click\", ($evt) => {\n\n      let _nav = document.querySelector(\".navbar-menu\");\n\n      if (_nav.getAttribute(\"data-hidden\") == \"true\") {\n          _nav.style.display = \"block\";\n          _nav.setAttribute(\"data-hidden\", \"false\");\n      } else {\n          _nav.style.display = \"none\";\n          _nav.setAttribute(\"data-hidden\", \"true\");\n      }\n\n  });\n\n  let _preloader = document.querySelector(\".preloader-wrapper\");\n\n  _preloader.addEventListener(whichTransitionEvent(), () => {\n      _preloader.parentNode.removeChild(_preloader);\n  });\n  \n  window.onload = ($evt) => {\n      // return;\n      let _nav = document.querySelector(\".navbar-menu\");\n\n      if (getComputedStyle(_nav).display == \"none\")\n          _nav.setAttribute(\"data-hidden\", \"true\");\n      else\n          _nav.setAttribute(\"data-hidden\", \"false\");\n\n      document.querySelector(\".preloader-wrapper\").classList.add(\"hide\");\n  }\n\n  if( !document.querySelectorAll(\".converter-wrapper\").length )\n    return;\n\n  window.thisApp = new App(new CurrencyConverter()).init();\n\n});"]}