{"version":3,"sources":["CurrencyConverter.js","app.js"],"names":["exports","originalGlobalValue","CurrencyConverter","privateMethod","Symbol","[object Object]","this","API_ENDPOINT","console","log","Promise","resolves","rejects","fetch","then","$result","json","$data","catch","$error","$amount","$fromCurrency","$toCurrency","$resolves","$rejects","reject","define","amd","module","window","App","$converter","c1Field","id","c2Field","amountField","convertBtn","tab1Btn","tab2Btn","tab1","tab2","converter","enableTabs","notification","results","$idname","length","document","getElementById","initUI","loadCurrency","style","display","addEventListener","parentNode","classList","toggle","getAttribute","convertCurrency","documentElement","$evt","target","querySelector","setAttribute","async","_data","getCurrencies","key","value","Object","entries","options","add","Option","currencyName","removeAttribute","toggleNotification","getData","formIsValid","_amount","_from","selectedIndex","_to","_result","convert","parseInt","_currencyPair","keys","join","val","firstElementChild","innerHTML","lastElementChild","Number","parseFloat","toFixed","_errormsg","$visible","$message","$alert","$handler","classNames","className","split","find","$className","startsWith","remove","ready","fn","readyState","onresize","_nav","getComputedStyle","_preloader","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","undefined","whichTransitionEvent","removeChild","onload","querySelectorAll","thisApp","init"],"mappings":"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","file":"build.js","sourcesContent":[";(function (exports) {\n  'use strict';\n\n  // Shortcuts to improve speed and size\n  const originalGlobalValue = exports.CurrencyConverter;\n\n  // Private methods\n  const privateMethod = Symbol('privateMethod');\n\n  class CurrencyConverter {\n\n    constructor() {\n      this.API_ENDPOINT = \"https://free.currencyconverterapi.com/api/v5\";\n    }\n  \n    init() {\n      \n    }\n\n    [privateMethod] () {\n      console.log( \"private\" );\n    }\n\n    getCurrencies() {\n\n      return new Promise( (resolves, rejects) => {\n        \n        fetch( `${this.API_ENDPOINT}/currencies` ).then( ($result) => {\n          $result.json().then( ($data) => {\n            resolves($data);\n          })\n        }).catch( ($error) => {\n          rejects( `Failed to load currencies from remote API [${$error}]` );\n        })\n        \n      });\n    }\n\n    convert( $amount=0, $fromCurrency=\"\", $toCurrency=\"\" ) {\n\n      if( !$amount || !$fromCurrency || !$toCurrency ) \n        return Promise.reject( \"Specify amount and currencies\" );\n\n      return new Promise( ( $resolves, $rejects ) => {\n\n        fetch( `${this.API_ENDPOINT}/convert?q=${$fromCurrency}_${$toCurrency}&compact=y` ).then( ($result) => {\n          $result.json().then( ($data) => {\n            $resolves($data);\n          });\n        })\n\n      })\n    }\n\n    static noConflict() {\n      exports.CurrencyConverter = originalGlobalValue;\n      return this;\n    }\n  \n    \n  }\n\n  // const proto = CurrencyConverter.prototype;\n\n\n  // Expose the class either via AMD, CommonJS or the global object\n  if (typeof define === 'function' && define.amd) {\n      define(function () {\n          return CurrencyConverter;\n      });\n  }\n  else if (typeof module === 'object' && module.exports){\n      module.exports = CurrencyConverter;\n  }\n  else {\n      exports.CurrencyConverter = CurrencyConverter;\n  }\n\n})( typeof window !== \"undefined\" ? window : this || {} );\n\n\n","/* requires: CurrencyConverter.js */\n\n// private methods\nclass App {\n\n    constructor($converter = null) {\n\n        this.c1Field = this.id(\"c1Field\");\n        this.c2Field = this.id(\"c2Field\");\n        this.amountField = this.id(\"amount\");\n        this.convertBtn = this.id(\"convertBtn\");\n\n        this.tab1Btn = this.id(\"tab1Btn\");\n        this.tab2Btn = this.id(\"tab2Btn\");\n\n        this.tab1 = this.id(\"tab1\");\n        this.tab2 = this.id(\"tab2\");\n\n        this.converter = $converter;\n\n        this.enableTabs = true;\n        this.notification = this.id(\"notification\");\n\n        this.results = this.id(\"results\");\n\n    }\n\n    id( $idname = \"\" ) {\n        return (typeof $idname !== \"string\" || !$idname.length) ? null : document.getElementById($idname);\n    }\n\n    init() {\n\n        this.initUI();\n        this.loadCurrency();\n\n        return this;\n    }\n\n    initUI() {\n\n        // Tabs\n        this.tab2.style.display = \"none\";\n        this.results.style.display = \"none\";\n\n        this.tab1Btn.addEventListener(\"click\", () => {\n            if (!this.enableTabs)\n                return;\n            this.tab1.style.display = \"block\";\n            this.tab2.style.display = \"none\";\n\n            this.tab1Btn.parentNode.classList.toggle(\"is-active\");\n            this.tab2Btn.parentNode.classList.toggle(\"is-active\");\n        });\n\n        this.tab2Btn.addEventListener(\"click\", () => {\n            if (!this.enableTabs)\n                return;\n            this.tab1.style.display = \"none\";\n            this.tab2.style.display = \"block\";\n\n            this.tab1Btn.parentNode.classList.toggle(\"is-active\");\n            this.tab2Btn.parentNode.classList.toggle(\"is-active\");\n        });\n\n        // buttons\n        this.convertBtn.addEventListener(\"click\", () => {\n            if (!this.convertBtn.getAttribute(\"disabled\") != \"\")\n                this.convertCurrency();\n        });\n\n        document.documentElement.addEventListener(\"click\", ($evt) => {\n            if ($evt.target == document.querySelector(\"button.delete\")) {\n                $evt.target.parentNode.style.display = \"none\";\n            }\n        });\n\n    }\n\n    loadCurrency() {\n\n        this.enableTabs = false;\n        // this.convertBtn.classList.toggle(\"is-loading\");\n        this.convertBtn.setAttribute(\"disabled\", \"disabled\");\n\n        const getData = async() => {\n\n            try {\n                const _data = await this.converter.getCurrencies();\n\n                for (const [key, value] of Object.entries(_data.results)) {\n                    this.c1Field.options.add(new Option(value.currencyName, key));\n                    this.c2Field.options.add(new Option(value.currencyName, key));\n                }\n\n                this.convertBtn.removeAttribute(\"disabled\");\n\n            } catch ($error) {\n                this.toggleNotification(true, $error, \"is-danger\");\n            }\n\n            this.enableTabs = true;\n\n        }\n\n        getData();\n\n    }\n\n    async convertCurrency() {\n\n        this.toggleNotification(0);\n\n        if ( !this.formIsValid() ) {\n            this.toggleNotification(1, \"Enter Amount and specify the currency\", \"is-warning\");\n            return;\n        }\n\n        const _amount = this.amountField.value;\n        const _from = this.c1Field.options[this.c1Field.selectedIndex].value;\n        const _to = this.c2Field.options[this.c2Field.selectedIndex].value;\n\n        try {\n\n          this.enableTabs = false;\n          this.convertBtn.setAttribute(\"disabled\",\"disabled\");\n          this.convertBtn.classList.toggle(\"is-loading\");\n          this.results.style.display = \"none\";\n\n          const _result = await this.converter.convert( parseInt(_amount), _from, _to );\n          const _currencyPair = Object.keys(_result).join();\n          console.log( _currencyPair, _result[_currencyPair].val );\n\n          this.results.firstElementChild.innerHTML = `${_amount} ${_from} equals`;\n          this.results.lastElementChild.innerHTML = `${Number.parseFloat(_result[_currencyPair].val).toFixed(3)} ${_to}`;\n\n          this.results.style.display = \"block\";\n\n        } catch( $error ) {\n          let _errormsg = `Error converting from ${_from} to ${_to} [${$error}]`;\n          this.toggleNotification( 1, _errormsg, \"is-danger\" );\n        }\n\n        this.enableTabs = true;\n        this.convertBtn.removeAttribute(\"disabled\");\n        this.convertBtn.classList.toggle(\"is-loading\");\n    }\n\n    formIsValid() {\n        return !(this.c1Field.options[this.c1Field.selectedIndex].value === \"\" || this.c2Field.options[this.c2Field.selectedIndex].value === \"\" || this.amountField.value === \"\" );\n    }\n\n    toggleNotification($visible = false, $message = \"\", $alert = \"is-danger\", $handler = null) {\n\n        if (!$visible) {\n            this.notification.style.display = \"none\";\n            return;\n        }\n\n        // remove \"is-*\"\n        let classNames = this.notification.className;\n        classNames = classNames.split(\" \").find($className => $className.startsWith(\"is\"));\n        this.notification.classList.remove(classNames);\n\n        // set message and display\n        this.notification.querySelector(\":scope div\").innerHTML = $message;\n        this.notification.classList.toggle($alert);\n        this.notification.style.display = \"block\";\n\n    }\n\n}\n\n// DOM Loaded\nconst ready = (fn) => {\n    if (document.readyState != 'loading') {\n        fn();\n    } else {\n        document.addEventListener('DOMContentLoaded', fn);\n    }\n}\n\n\nready( () => { \n\n  document.documentElement.classList.toggle(\"no-js\");\n  document.documentElement.classList.add(\"js\");\n\n  const whichTransitionEvent = () => {\n      var t,\n          el = document.createElement(\"fakeelement\");\n\n      var transitions = {\n          \"transition\": \"transitionend\",\n          \"OTransition\": \"oTransitionEnd\",\n          \"MozTransition\": \"transitionend\",\n          \"WebkitTransition\": \"webkitTransitionEnd\"\n      }\n\n      for (t in transitions) {\n          if (el.style[t] !== undefined) {\n              return transitions[t];\n          }\n      }\n  }\n\n  window.onresize = () => {\n\n      let _nav = document.querySelector(\".navbar-menu\");\n\n      if (getComputedStyle(_nav).display == \"none\")\n          _nav.setAttribute(\"data-hidden\", \"true\");\n      else\n          _nav.setAttribute(\"data-hidden\", \"false\");\n\n  };\n\n  document.querySelector(\".navbar-burger\").addEventListener(\"click\", ($evt) => {\n\n      let _nav = document.querySelector(\".navbar-menu\");\n\n      if (_nav.getAttribute(\"data-hidden\") == \"true\") {\n          _nav.style.display = \"block\";\n          _nav.setAttribute(\"data-hidden\", \"false\");\n      } else {\n          _nav.style.display = \"none\";\n          _nav.setAttribute(\"data-hidden\", \"true\");\n      }\n\n  });\n\n  let _preloader = document.querySelector(\".preloader-wrapper\");\n\n  _preloader.addEventListener(whichTransitionEvent(), () => {\n      _preloader.parentNode.removeChild(_preloader);\n  });\n  \n  window.onload = ($evt) => {\n      // return;\n      let _nav = document.querySelector(\".navbar-menu\");\n\n      if (getComputedStyle(_nav).display == \"none\")\n          _nav.setAttribute(\"data-hidden\", \"true\");\n      else\n          _nav.setAttribute(\"data-hidden\", \"false\");\n\n      document.querySelector(\".preloader-wrapper\").classList.add(\"hide\");\n  }\n\n  if( !document.querySelectorAll(\".converter-wrapper\").length )\n    return;\n\n  window.thisApp = new App(new CurrencyConverter()).init();\n\n});"]}